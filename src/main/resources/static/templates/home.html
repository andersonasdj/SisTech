<!DOCTYPE html>
<html lang="br">

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
		integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
	<link rel="stylesheet" href="assets/css/stylePerfil.css">
	<title>SisTech - TechGold</title>
</head>

<body>
	<div class="container">
		<br />
		<!-- ################### BARRA DE NAVEGAÇÃO  -->
		<nav class="navbar navbar-expand-lg bg-light">
			<div class="container-fluid">
				<a class="navbar-brand" href="/sistech/home"><img src="./assets/img/key.png" style="height: 18px;"> SisTech</a>
				<button class="navbar-toggler" type="button" data-bs-toggle="collapse"
					data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
					aria-expanded="false" aria-label="Toggle navigation">
					<span class="navbar-toggler-icon"></span>
				</button>
				<div class="collapse navbar-collapse" id="navbarSupportedContent">
					<ul class="navbar-nav me-auto mb-2 mb-lg-0">
						<li class="nav-item">
							<a class="nav-link active" aria-current="page" href="/sistech/home">Início</a>
						</li>
						
							<li class="nav-item dropdown">
							<a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown"
								aria-expanded="false">
								Solicitações
							</a>
							<ul class="dropdown-menu">
								<li><a class="dropdown-item" href="/sistech/solicitacao/form">Novo</a></li>
								<li><a class="dropdown-item" href="/sistech/solicitacao/list">Listar</a></li>
								<li>
									<hr class="dropdown-divider">
								</li>
								<li><a class="dropdown-item" href="/sistech/solicitacao/legacy">Listar legadas</a></li>
								<li>
									<hr class="dropdown-divider">
								</li>
								<li><a class="dropdown-item" href="/sistech/solicitacao/relatorios">Relatórios</a></li>
							</ul>
						</li>
						
						<li class="nav-item dropdown">
							<a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown"
								aria-expanded="false">
								Clientes
							</a>
							<ul class="dropdown-menu">
								<li><a class="dropdown-item" href="/sistech/cliente/list">Listar</a></li>
								<li><a class="dropdown-item" href="/sistech/cliente/form">Novo</a></li>
								<li>
									<hr class="dropdown-divider">
								</li>
								<li><a class="dropdown-item" href="#">Something else here</a></li>
							</ul>
						</li>
						<li class="nav-item dropdown">
							<a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown"
								aria-expanded="false">
								Funcionarios
							</a>
							<ul class="dropdown-menu">
								<li><a class="dropdown-item" href="/sistech/funcionario/list">Listar</a></li>
								<li><a class="dropdown-item" href="/sistech/funcionario/form">Novo</a></li>
								<li>
									<hr class="dropdown-divider">
								</li>
								<li><a class="dropdown-item" href="#">Something else here</a></li>
							</ul>
						</li>
						<li class="nav-item dropdown">
							<a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown"
								aria-expanded="false">
								Dashboard
							</a>
							<ul class="dropdown-menu">
								<li><a class="dropdown-item" href="/sistech/solicitacao/dashboard/geral">Geral</a></li>
								<li><a class="dropdown-item" href="#">Ativas</a></li>
								<li>
									<hr class="dropdown-divider">
								</li>
								<li><a class="dropdown-item" href="#">Something else here</a></li>
							</ul>
						</li>
					</ul>
					<ul class="navbar-nav mb-3 mb-lg-0">
						<li class="nav-item dropdown">
							<a class="nav-link dropdown-toggle" id="perfil" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false"></a>
							<ul class="dropdown-menu">
								<li><a class="dropdown-item" href="#">Perfil</a></li>
								<li><a class="dropdown-item" href="/sistech/backup">Backup</a></li>
								<li>
									<hr class="dropdown-divider">
								</li>
								<li><a class="dropdown-item" href="/sistech/roleslist">Roles</a></li>
							</ul>
						</li>
							<a href="/sistech/logout">
								<img src="./assets/img/logout.png" style="width: 60px; border: none;" >
							</a>
					</ul>
				</div>
			</div>
		</nav>
		<!-- ################### BARRA DE NAVEGAÇÃO  -->

		<hr class="bg-danger border-2 border-top border-danger">
		
		<!-- ######################################################################################### -->
		<div class="container">
		 <div class="row justify-content-between">
		    <div class="col-8">
				<div class="container">
					<div id="containerPerfil">
							<aside class="">
										<img id="imagem" src="./assets/img/login.png" style="width: 180px" class="img-fluid img-thumbnail" alt="...">
								<div id="perfil">
									<p class="asid-linha"> <span id="dataUltimoLogin"> </p>
									<p class="asid-linha"> <span id="saudacao"> </span> <b><span id="nomeFuncionario"> </span></b>   </p>
								</div>
							</aside>
						<br/><br/>
					</div>
				</div>
		    </div>
		    <div class="col-4">
				<div class="calender">
					<div class="top">
						<span id="months">Janeiro</span>
					</div>
						
					<span id="days">Sabado</span>
					<span id="dates">01</span>
					<span id="years">2024</span>
				</div>
				<p class="time-title">Hoje</p>
				<div class="time">
				    <div id="hours">00</div>
				    <div id="minutes">00</div>
				    <div id="seconds">00</div>
				    <div id="ampm">00</div>
				</div>
		    </div>
		 </div>
		</div>
		<!-- ######################################################################################### -->
		
		<br/><br/>
		
		<div class="container">
			<p><span class="linhaSolicitacoes" id="abertas"></span></p>
			<p><span class="linhaSolicitacoes" id="andamento"></span></p>
			<p><span class="linhaSolicitacoes" id="agendadas"></span></p>
		</div>
	
		<div class="container">
			 <div class="row justify-content-between">
			    <div class="col-4">
					<canvas id="minhasSolicitacoes" style="height:60vh; width:40vw"></canvas>
			    </div>
			    <div class="col-4">
			    	<canvas id="geralSolicitacoes" style="height:60vh; width:40vw"></canvas>
			    </div>
			 </div>
		</div>

		<br/><br/>
		<footer class="text-center text-white">
			<div class="container">
				<!-- Grid container -->
			<div class="p-4 pb-0">
				<!-- Section: Social media -->
				<section class="mb-4">
					<a class="btn btn-primary btn-floating m-1" style="background-color: rgb(0,191,255);" href="#!"
							role="button"></a>
						<a class="btn btn-primary btn-floating m-1" style="background-color: rgb(30,144,255);" href="#!"
							role="button"></a>
						<a class="btn btn-primary btn-floating m-1" style="background-color: rgb(65,105,225);" href="#!"
							role="button"></a>
						<a class="btn btn-primary btn-floating m-1" style="background-color: rgb(0,0,255);" href="#!"
							role="button"></a>
						<a class="btn btn-primary btn-floating m-1" style="background-color: rgb(0,0,205);" href="#!"
							role="button"></a>
						<a class="btn btn-primary btn-floating m-1" style="background-color: rgb(0,0,128);" href="#!"
							role="button"></a>
				</section>
				<!-- Section: Social media -->
			</div>
			<!-- Grid container -->

			<!-- Copyright -->
			<div class="text-center p-3" style="background-color: rgba(0, 0, 0, 0.2);">
				© 2024 Copyright:
				<a class="text-white" href="#">TechGold</a>
			</div>
			<!-- Copyright -->
			</footer>
		</footer>
	</div>

	<script src="https://code.jquery.com/jquery-3.6.3.js"
		integrity="sha256-nQLuAZGRRcILA+6dMBOvcRh5Pe310sBpanc6+QBmyVM=" crossorigin="anonymous">
		</script>
	<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"
		integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3" crossorigin="anonymous">
		</script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.min.js"
		integrity="sha384-cuYeSxntonz0PPNlHhBs68uyIAVpIIOZZ5JqeqvYYIcEL727kskC66kF92t6Xl2V" crossorigin="anonymous">
		</script>
		<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
	<script>
		$(document).ready(function () {

				$.ajax({
					url: "/sistech/funcionarios/home",
					type: "GET",
					success: function (data) {
						$('#saudacao').text(data.saudacao);
						$('#nomeFuncionario').text(data.nomeFuncionario);
						$('#dataUltimoLogin').text("Ultimo login: " + data.dataUltimoLogin);
						
						if(data.solicitacoes.abertas >= 1){
							$('#abertas').text("Solicitações abertas: " + data.solicitacoes.abertas);
						}
						if(data.solicitacoes.agendados >= 1){
							$('#agendadas').text("Solicitações agendadas: " + data.solicitacoes.agendados);
						}
						if(data.solicitacoes.andamento >= 1){
							$('#andamento').text("Solicitações em andamento: " + data.solicitacoes.andamento);
						}
						
						
						const ctx = document.getElementById('minhasSolicitacoes');
						new Chart(ctx, {
					    type: 'bar',
					    data: {
					      labels: ['Abertas', 'Andamento', 'Agendados', 'Aguardando'],
					      datasets: [{
					        label: 'Minhas Solicitações: ' + data.solicitacoes.total,
					        data: [data.solicitacoes.abertas, data.solicitacoes.andamento, data.solicitacoes.agendados, data.solicitacoes.aguardando],
					         backgroundColor: [
							      'rgba(255, 99, 132, 0.2)',
							      'rgba(0, 150, 255, 0.2)',
							      'rgba(255, 205, 86, 0.2)',
							      'rgba(121, 125, 127, 0.2)',
							      'rgba(54, 162, 235, 0.2)',
							      'rgba(153, 102, 255, 0.2)',
							      'rgba(201, 203, 207, 0.2)'
							    ],
							    borderColor: [
							      'rgb(255, 99, 132)',
							      'rgb(0, 150, 255)',
							      'rgb(255, 205, 86)',
							      'rgb(121, 125, 127)',
							      'rgb(54, 162, 235)',
							      'rgb(153, 102, 255)',
							      'rgb(201, 203, 207)'
					    	],
					        borderWidth: 1
					      }]
					    },
					    options: {
							 responsive: true,
						     scales: {
										 y: { // defining min and max so hiding the dataset does not change scale range
									        min: 0,
									        max: data.solicitacoes.total
									      }
								}
					    }
					  });
					  
					  const ctx2 = document.getElementById('geralSolicitacoes');
					  new Chart(ctx2, {
					    type: 'line',
					    data: {
					      labels: ['Abertas', 'Andamento', 'Agendados', 'Aguardando'],
					      datasets: [{
					        label: 'Solicitações gerais: ' + data.gerais.total,
					        data: [data.gerais.abertas, data.gerais.andamento, data.gerais.agendados, data.solicitacoes.aguardando],
					         backgroundColor: [
							      'rgba(255, 99, 132, 0.2)',
							      'rgba(0, 150, 255, 0.2)',
							      'rgba(255, 205, 86, 0.2)',
							      'rgba(121, 125, 127, 0.2)',
							      'rgba(54, 162, 235, 0.2)',
							      'rgba(153, 102, 255, 0.2)',
							      'rgba(201, 203, 207, 0.2)'
							    ],
							    borderColor: [
							      'rgb(255, 99, 132)',
							      'rgb(0, 150, 255)',
							      'rgb(255, 205, 86)',
							      'rgb(121, 125, 127)',
							      'rgb(54, 162, 235)',
							      'rgb(153, 102, 255)',
							      'rgb(201, 203, 207)'
					    	],
					        borderWidth: 1
					      }]
					    },
					    options: {
							 responsive: true,
						      scales: {
									 y: { // defining min and max so hiding the dataset does not change scale range
								        min: 0,
								        max: data.gerais.total
								      }
								}
					    }
					  });
						
						
					},
					erro: function (request, status, error) { 
					},
					complete: function (data) { }
				})
		});
		
	</script>
	<script>
		setInterval(() => {
		  const month = ["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julio","Agosto","Setembro","Outubro","Novembro","Dezembro"];
		  const weekday = ["Domingo","Segunda","Terça","Quarta","Quinta","Sexta","Sabado"];
		
		  // Day
		  let months = document.getElementById("months");
		  let days = document.getElementById("days");
		  let dates = document.getElementById("dates");
		  let years = document.getElementById("years");
		
		  // time
		  let hours = document.getElementById("hours");
		  let minutes = document.getElementById("minutes");
		  let seconds = document.getElementById("seconds");
		  let ampm = document.getElementById("ampm");
		
		  //Date
		  let ma = month[new Date().getMonth()];
		  let dy = weekday[new Date().getUTCDay()];
		  let dt = new Date().getDate();
		  let yr = new Date().getFullYear();
		
		  //time
		  let h = new Date().getHours();
		  let m = new Date().getMinutes();
		  let s = new Date().getSeconds();
		  let am = h >= 12 ? "PM" : "AM";
		
		
		  //convart time 12 hours
		  if (h > 12){
		    h = h - 12;
		  }
		
		  // add zero
		  h = (h < 10) ? "0" + h : h;
		  m = (m < 10) ? "0" + m : m;
		  s = (s < 10) ? "0" + s : s;
		  dt = (dt < 10) ? "0" + dt : dt;
		  
		
		  // date
		  months.innerHTML = ma;
		  days.innerHTML = dy;
		  dates.innerHTML = dt;
		  years.innerHTML = yr;
		
		  // time
		  hours.innerHTML = h;
		  minutes.innerHTML = m;
		  seconds.innerHTML = s;
		  ampm.innerHTML = am;
		})
		  
	</script>

</body>

</html>